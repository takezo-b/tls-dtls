# Web取得ツール使い分けガイド

## 現在利用可能なツール比較

### WebFetch（Claude Code内蔵）

**適用シーン**:

- 技術仕様書・RFC文書の取得
- 公式ドキュメントの情報抽出
- セキュリティガイドラインの収集
- API仕様書の参照

**特徴**:

- ✅ 即座に利用可能
- ✅ AIによる内容要約・抽出機能
- ✅ 安定した動作実績
- ❌ リダイレクト時は手動対応必要
- ❌ 大規模コンテンツの分割読み込み不可

**使用例**:

```javascript
WebFetch(
  url: "https://www.rfc-editor.org/rfc/rfc8446.txt",
  prompt: "TLS 1.3の主要改善点を抽出"
)
```

### MCP Fetch（専用サーバー）

**適用シーン**:

- 大規模Webページの系統的収集
- 分割読み込みが必要な巨大文書
- 高度なセキュリティ設定が必要な場合
- プロキシ経由でのアクセス

**特徴**:

- ✅ 分割読み込み機能（start_index対応）
- ✅ カスタムUser-Agent設定可能
- ✅ robots.txt遵守
- ✅ プロキシ設定対応
- ❌ 依存関係インストールが複雑
- ❌ ネットワーク環境によりセットアップ困難

**理論的使用例**:

```javascript
mcp_fetch(
  url: "https://example.com/large-document",
  max_length: 5000,
  start_index: 10000
)
```

## 実用的な使い分け戦略

### Phase 1: 基本情報収集

- **手法**: WebFetch
- **対象**: RFC、NIST文書、仕様書
- **理由**: 即座にアクセス可能、要約機能有効

### Phase 2: 詳細技術調査

- **手法**: WebFetch + GitHub MCP
- **対象**: 実装コード、API文書、変更履歴
- **理由**: GitHub MCPで補完的情報収集

### Phase 3: 包括的収集（将来）

- **手法**: MCP Fetch（条件が整えば）
- **対象**: 大規模技術文書、複数サイト横断調査
- **理由**: 自動化・効率化のメリット

## TLS研究プロジェクトでの推奨フロー

### 1. 仕様・標準文書収集

```bash
# RFC文書
WebFetch → RFC 8446, 5246, 6066等

# 政府ガイドライン  
WebFetch → NIST SP 800-52, NSA TLS指針
```

### 2. 実装詳細調査

```bash
# GitHub経由
GitHub MCP → OpenSSL, wolfSSL, Mbed TLS

# 公式文書
WebFetch → 各プロジェクトのドキュメント
```

### 3. セキュリティ情報収集

```bash
# 脆弱性情報
WebFetch → CVE検索、セキュリティアドバイザリ

# 最新動向
WebFetch → 技術ブログ、研究論文
```

## エラーハンドリング指針

### タイムアウト対策

1. **軽量ページ優先**: 概要ページから詳細へ
2. **分割アクセス**: 大文書は章別にアクセス
3. **代替ソース**: 複数の情報源を準備

### リダイレクト対応

1. **手動追跡**: WebFetchの指示に従って再実行
2. **最終URL記録**: 今後の直接アクセス用
3. **パターン学習**: よくあるリダイレクトを把握

### セキュリティ考慮

1. **robots.txt確認**: 手動でrobot.txtを確認
2. **レート制限**: 同一サイトへの連続アクセス制限
3. **User-Agent**: 適切な識別情報の設定

## 成功事例と教訓

### ✅ 成功パターン

- **RFC 8446取得**: リダイレクト対応で正常取得
- **NIST SP 800-52**: 政府文書の要約抽出成功
- **wolfSSL特徴**: オープンソース文書の情報整理

### ❌ 制限事例

- **CVE MITRE**: タイムアウトによるアクセス失敗
- **大規模ページ**: 全文取得の難しさ
- **動的コンテンツ**: JavaScript必須サイトへの対応限界

## 将来の改善方向

### 短期（現在のツール最適化）

- タイムアウト設定の調整
- リダイレクト自動追跡の仕組み化
- エラーパターンの文書化

### 中期（MCP Fetch導入）

- ネットワーク環境改善後の再試行
- 依存関係問題の解決
- 分割読み込み機能の活用

### 長期（統合ワークフロー）

- 複数ツールの自動連携
- 情報収集パイプラインの構築
- 学習済みパターンの活用

このガイドを参考に、効率的かつ確実な技術情報収集を実現できます。
